<!DOCTYPE html>
<html lang="es">
<head>
<script>
//  philipwalton.com/articles/the-google-analytics-setup-i-use-on-every-site-i-build
window.ga = window.ga || function() {
  (ga.q = ga.q || []).push(arguments);
};
ga('create', 'UA-33848682-1', 'auto');
ga('set', 'transport', 'beacon');
ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>

<meta charset="utf-8">
<meta name="description" content="Simplest possible examples of HTML, CSS and JavaScript.">
<meta name="author" content="//samdutton.com">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta itemprop="name" content="simpl.info: simplest possible examples of HTML, CSS and JavaScript">
<meta itemprop="image" content="/images/icons/icon192.png">
<meta id="theme-color" name="theme-color" content="#fff">

<title>Reporte Fotogr√°fico</title>
<link rel="stylesheet" href="../css/main.css">

  <style>
    video {
      object-fit: cover;
    }

    @media (min-width: 400px) {
      video {
        height: 300px;
      }
    }
  </style>
</head>
<body>
  <div id="container">
    <a id="add" href="#">Agregar foto</a> <input name="imgInp" type="text" id="imgInp"/> <a  id="send" href="#">Enviar</a> 
      <table name="tablaimagen" class="table" id="mytable">
      <video autoplay playsinline></video>
        <canvas id='canvas-element'  style="display:none;"></canvas>
  </div>

<img id="show-img1" src=""> 
 <script src="js/main.js"></script>

<script type="text/javascript" charset="utf-8"> 
$(document).ready(
 (function () {
    var video = document.querySelector('video');
    const canvas = document.querySelector('#canvas-element');
    var constraints = { video: true };
    
    function handleSuccess(stream) { 
    window.stream = stream; 
    video.srcObject = stream; };
    
    navigator.mediaDevices.getUserMedia(constraints).
        then(handleSuccess).catch(function(error){console.log(error)});
    var i = 0;
    <!--setInterval(explode, 100); -->
    $( "#add" ).click(function() {
       canvas.width = video.videoWidth;
       canvas.height = video.videoHeight;
       canvas.getContext('2d').drawImage(video, 0, 0);
       var str =  $( "#imgInp" ).val();
       var newElement2 = '<tr><td><div><img id="screenshot-img'+i+'" src=""></div><input name="imgInp'+i+'" type="text" id="imgInp'+i+'" value="'+str+'"/></td></tr>';
       $( "#mytable" ).append( $(newElement2) );
       const img = document.querySelector('#screenshot-img'+i);
       img.src = canvas.toDataURL('image/png');
       i += 1;
    }); 
    $( "#send" ).click(function() {
	   const img1 = document.querySelector('#screenshot-img0');
       const show1 = document.querySelector('#show-img1');
       show1.src=img1.src;
       console.log(img1.src)
    });
    function explode(){
       canvas.width = video.videoWidth;
       canvas.height = video.videoHeight;
       canvas.getContext('2d').drawImage(video, 0, 0);
      const show1 = document.querySelector('#show-img1');
      show1.src = canvas.toDataURL('image/png');
    };   
	})()
);
</script> 
</body>
</html>
